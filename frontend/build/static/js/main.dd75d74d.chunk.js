(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{34:function(e,a,t){e.exports=t.p+"static/media/logo-via-logohub2.e641c11f.png"},52:function(e,a,t){e.exports=t(85)},57:function(e,a,t){},58:function(e,a,t){},85:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(24),c=t.n(s),l=(t(57),t(14)),i=t(23),o=(t(58),t(59),t(1)),m=t(5),u=t(4),h=t(7),d=t(6),p=t(8),f=t(29),v=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(h.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={postcode:"",choices:[""]},t.options=[{value:"desks",label:"Desks"},{value:"charging",label:"Charging Plugs"},{value:"cafe",label:"Cafe onsite"},{value:"sofas",label:"Comfy sofas"},{value:"wifi",label:"Wifi"}],t.handleMultiChange=function(e){var a=e?e.map((function(e){return e.value})):[];t.setState({choices:a})},t.handleChange=function(e){t.setState(Object(o.a)({},e.target.name,e.target.value))},t.handleSubmit=function(e){e.preventDefault();var a={postcode:t.state.postcode.replace(" ",""),choices:t.state.choices};t.props.history.push({pathname:"/places/search",search:"",state:{find_location:a}})},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("section",{className:"hero is-fullheight-with-navbar"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("p",{className:"title is-1 has-text-warning has-text-centered is-family-code"},"Find your place to Bee.LDN"),r.a.createElement("p",{className:"has-text-white has-text-centered"},"Searching for a FREE place to study in London? Use our search below!"),r.a.createElement("form",{className:"has-text-centered",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label has-text-white has-text-centered"},"Enter your postcode here:"),r.a.createElement("input",{type:"text",className:"column is-half is-offset-one-quarter card",placeholder:"Postcode",onChange:this.handleChange,name:"postcode",required:!0})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label has-text-white has-text-centered"},"Select the facilities you require from the dropdown below:"),r.a.createElement("div",{className:"control column is-half is-offset-one-quarter card"},r.a.createElement(f.a,{options:this.options,isMulti:!0,onChange:this.handleMultiChange}))),r.a.createElement("button",{className:"button is-warning is-rounded is-medium is-one-quarter is-family-code"},"Search")))))}}]),a}(r.a.Component),g=function(){function e(){Object(m.a)(this,e)}return Object(u.a)(e,null,[{key:"setToken",value:function(e){localStorage.setItem("token",e)}},{key:"getToken",value:function(){return localStorage.getItem("token")}},{key:"logout",value:function(){localStorage.removeItem("token")}},{key:"getPayload",value:function(){var e=this.getToken();if(!e)return!1;var a=e.split(".");return!(a.length<3)&&JSON.parse(atob(a[1]))}},{key:"isAuthenticated",value:function(){var e=this.getPayload();return!!e&&Math.round(Date.now()/1e3)<e.exp}}]),e}(),b=t(34),E=t.n(b),N=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(h.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={navOpen:!1},t.toggleNavbar=function(){t.setState({navOpen:!t.state.navOpen})},t.handleLogout=function(){g.logout(),t.props.history.push("/")},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.location.pathname!==e.location.pathname&&this.setState({navOpen:!1})}},{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar is-info"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement(l.b,{className:"navbar-item",to:"/"},r.a.createElement("img",{src:E.a,alt:E.a})),r.a.createElement("a",{href:"/#",className:"navbar-burger ".concat(this.state.navOpen?"is-active":""),onClick:this.toggleNavbar},r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}))),r.a.createElement("div",{className:"navbar-menu ".concat(this.state.navOpen?"is-active":"")},r.a.createElement("div",{className:"navbar-end"},r.a.createElement(l.b,{className:"navbar-item is-family-code",to:"/maps"},"HiveMap"),r.a.createElement(l.b,{className:"navbar-item is-family-code",to:"/places"},"HiveList"),!g.isAuthenticated()&&r.a.createElement(l.b,{className:"navbar-item is-family-code",to:"/register"},"Signup"),!g.isAuthenticated()&&r.a.createElement(l.b,{className:"navbar-item is-family-code",to:"/login"},"Login"),g.isAuthenticated()&&r.a.createElement(l.b,{className:"navbar-item is-family-code",to:"/places/new"},"Add to the Hive"),g.isAuthenticated()&&r.a.createElement("a",{href:"/#",onClick:this.handleLogout,className:"navbar-item"},"Logout")))))}}]),a}(r.a.Component),y=Object(i.g)(N),w=t(13),k=function(e){var a=e.component,t=Object(w.a)(e,["component"]);return g.isAuthenticated()?r.a.createElement(i.b,Object.assign({},t,{component:a})):(g.logout(),r.a.createElement(i.a,{to:"/login"}))},O=t(10),j=t.n(O),x=t(12),C=t(11),S=t.n(C),A=function(e){var a=e.id,t=e.name,n=e.image;return r.a.createElement(l.b,{to:"/place/".concat(a)},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",{className:"card-header-title"},t)),r.a.createElement("div",{className:"card-image"},r.a.createElement("figure",{className:"image"},r.a.createElement("img",{src:n,alt:t})))))},I="pk.eyJ1IjoiY2thcGFrIiwiYSI6ImNrNWk4eXNuZjA4bGMzZ21uY3g1aG81YzQifQ.wz-4MxPmrqfMG6Ie5iiIGw",M=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(h.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={places:[]},t.convertPostcode=function(){var e=Object(x.a)(j.a.mark((function e(a){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(a,".json?access_token=").concat(I));case 2:return t=e.sent,n=t.data.features.map((function(e){return{name:e.place_name,lng:e.center[0],lat:e.center[1]}})).sort((function(e){return e.name}))[0],e.abrupt("return",{latitude:n.lat,longitude:n.lng});case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(x.a)(j.a.mark((function e(){var a,t,n,r,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.history.location.state.postcode){e.next=21;break}return a=this.props.history.location.state.postcode,console.log("Using postcode: "+a),e.next=6,this.convertPostcode(a);case 6:return t=e.sent,n=["longitude=".concat(t.longitude),"latitude=".concat(t.latitude)],e.prev=8,e.next=11,S.a.get("/api/places?".concat(n.join("&")));case 11:r=e.sent,this.setState({places:r.data}),console.log(r),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),this.props.history.push("/notfound");case 19:e.next=32;break;case 21:return e.prev=21,e.next=24,S.a.get("/api/places/");case 24:s=e.sent,this.setState({places:s.data}),console.log(s),e.next=32;break;case 29:e.prev=29,e.t1=e.catch(21),this.props.history.push("/notfound");case 32:case"end":return e.stop()}}),e,this,[[8,16],[21,29]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container is-centered"},r.a.createElement("div",{className:"columns is-mobile is-multiline"},this.props.history.location.state?r.a.createElement("p",{className:"container title is-3"},"Unfortunately we can't find anything like that in our database. But here are some alternatives nearby:"):null,this.state.places.map((function(e){return r.a.createElement(A,Object.assign({id:e.id,key:e.id},e))})))))}}]),a}(r.a.Component),D=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(h.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={places:[],viewport:{latitude:51.5074,longitude:.1278}},t.checkResults=function(e,a){e.length||t.props.history.push({pathname:"/places",search:"",state:{noResult:!0,postcode:a}})},t.convertData=Object(x.a)(j.a.mark((function e(){var a,n,r,s,c,l,i,o,m,u,h;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=t.props.history.location.state.find_location,n=a.postcode,r=n.replace(/[^a-z0-9]/gi,"").slice(0,3).toLowerCase(),s=["postcode=".concat(r)],c=!0,l=!1,i=void 0,e.prev=7,o=a.choices.filter((function(e){return e}))[Symbol.iterator]();!(c=(m=o.next()).done);c=!0)u=m.value,s.push("facilities="+u);e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),l=!0,i=e.t0;case 15:e.prev=15,e.prev=16,c||null==o.return||o.return();case 18:if(e.prev=18,!l){e.next=21;break}throw i;case 21:return e.finish(18);case 22:return e.finish(15);case 23:return e.next=25,S.a.get("/api/places?".concat(s.join("&")));case 25:h=e.sent,t.setState({places:h.data}),t.checkResults(h.data,n);case 28:case"end":return e.stop()}}),e,null,[[7,11,15,23],[16,,18,22]])}))),t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){this.convertData()}},{key:"render",value:function(){return r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"columns is-mobile is-multiline"},this.state.places.map((function(e){return r.a.createElement(A,Object.assign({key:e.id},e))})))))}}]),a}(r.a.Component),z=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(h.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={place:{},text:""},t.handleChange=function(e){t.setState({text:e.target.value})},t.handleSubmit=function(e){e.preventDefault();var a=t.props.match.params.id;S.a.post("/api/places/".concat(a,"/comments/"),{text:t.state.text},{headers:{Authorization:"Bearer ".concat(g.getToken())}}).then((function(e){t.setState({place:e.data,text:""})})).catch((function(e){return console.log(e)}))},t.handleDelete=Object(x.a)(j.a.mark((function e(){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props.match.params.id,e.prev=1,e.next=4,S.a.delete("/api/places/".concat(a),{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 4:t.props.history.push("/places"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[1,7]])}))),t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(x.a)(j.a.mark((function e(){var a,t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.match.params.id,e.prev=1,e.next=4,S.a.get("/api/places/".concat(a));case 4:t=e.sent,this.setState({place:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.props.history.push("/notfound");case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){if(!this.state.place.id)return null;var e=this.state.place;return console.log(this.state.place),console.log(this.state.text,"text"),r.a.createElement("section",{className:"section show"},r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"title is-family-code"},e.name),r.a.createElement("h2",{className:"address"},"You'll find it here: ",e.address),r.a.createElement("hr",null),r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-half"},r.a.createElement("figure",{className:"image"},r.a.createElement("img",{src:e.image,alt:e.name})),r.a.createElement("hr",null),r.a.createElement("h4",{className:"title is-4 is-family-code"},"The amenities"),r.a.createElement("div",{className:"facility-text"},e.facilities.map((function(e){return r.a.createElement("div",{key:e.id},e.name)}))),r.a.createElement("hr",null)),r.a.createElement("div",{className:"column is-half"},r.a.createElement("h4",{className:"title is-4 is-family-code"},"What we love about ",e.name),r.a.createElement("p",null,e.description),r.a.createElement("hr",null),r.a.createElement("form",{className:"form title is-4 is-family-code",onSubmit:this.handleSubmit},"Tell us what you think! Send in your review:",r.a.createElement("hr",null),r.a.createElement("textarea",{name:"text",onChange:this.handleChange,value:this.state.text,placeholder:"Maximum character length for your comment is 50"}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Submit"})),r.a.createElement("article",{className:"media"},r.a.createElement("div",{className:"media-content"},r.a.createElement("h4",{className:"title is-4 is-family-code"},"Reviews from our members:"),r.a.createElement("hr",null),r.a.createElement("div",{className:"content"}," ",e.comments.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("p",null,r.a.createElement("strong",null,e.owner.username),r.a.createElement("br",null),'"',e.text,'"',r.a.createElement("br",null)),r.a.createElement("hr",null))})))))))))}}]),a}(r.a.Component),P=t(22),T=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(h.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={data:{username:"",email:"",password:"",password_confirmation:""},errors:{}},t.handleChange=function(e){var a=Object(P.a)({},t.state.data,Object(o.a)({},e.target.name,e.target.value)),n=Object(P.a)({},t.state.errors,Object(o.a)({},e.target.name,""));t.setState({data:a,errors:n})},t.handleSubmit=function(){var e=Object(x.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,S.a.post("/api/register",t.state.data);case 4:t.props.history.push("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t.setState({errors:e.t0.response.data.errors});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(a){return e.apply(this,arguments)}}(),t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("section",{className:"is-dark is-fullheight-with-navbar"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"column is-half is-offset-one-quarter"},r.a.createElement("h2",{className:"title is-1 has-text-warning has-text-centered is-family-code"},"Register"),r.a.createElement("div",{className:"notification is-light"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(this.state.errors.username," ? : 'is-danger' : '' "),name:"username",placeholder:"Username",onChange:this.handleChange})),this.state.errors.username&&r.a.createElement("small",{className:"help is-danger"},this.state.errors.username)),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(this.state.errors.email," ? : 'is-danger' : '' "),name:"email",placeholder:"Email",onChange:this.handleChange})),this.state.errors.email&&r.a.createElement("small",{className:"help is-danger"},this.state.errors.email)),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(this.state.errors.password," ? : 'is-danger' : '' "),name:"password",type:"password",placeholder:"Password",onChange:this.handleChange})),this.state.errors.password&&r.a.createElement("small",{className:"help is-danger"},this.state.errors.password)),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(this.state.errors.password_confirmation," ? : 'is-danger' : '' "),name:"password_confirmation",type:"password",placeholder:"Password Confirmation",onChange:this.handleChange})),this.state.errors.password_confirmation&&r.a.createElement("small",{className:"help is-danger"},this.state.errors.password_confirmation)),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{type:"submit",className:"button is-info is-rounded is-outlined is-medium is-fullwidth is-family-code"},"Signup"))))))))}}]),a}(r.a.Component),q=t(49),G={common:{"X-CSRF-TOKEN":t.n(q).a.get("csrftoken")}},B=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(h.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={data:{email:"",password:""},error:""},t.handleChange=function(e){var a=e.target,n=a.name,r=a.value,s=Object(P.a)({},t.state.data,Object(o.a)({},n,r));t.setState({data:s,error:""})},t.handleSubmit=function(){var e=Object(x.a)(j.a.mark((function e(a){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,S.a.post("/api/login",t.state.data,G);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),t.setState({error:"Incorrect Credentials"}),e.abrupt("return");case 11:g.setToken(n.data.token),t.props.history.push("/places");case 13:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(a){return e.apply(this,arguments)}}(),t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("section",{className:"is-dark is-fullheight-with-navbar"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"column is-half is-offset-one-quarter"},r.a.createElement("h2",{className:"title is-1 has-text-warning has-text-centered is-family-code"},"Login"),r.a.createElement("div",{className:"notification is-light"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(this.state.error," ? : 'is-danger' : '' "),name:"email",placeholder:"Email",onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(this.state.error," ? : 'is-danger' : '' "),type:"password",name:"password",placeholder:"Password",onChange:this.handleChange})),this.state.error&&r.a.createElement("small",{className:"help is-danger"},this.state.error)),r.a.createElement("button",{type:"submit",className:"button is-info is-rounded is-outlined is-medium is-fullwidth is-family-code"},"Get me into the Hive"))))))}}]),a}(r.a.Component),L=function(e){var a=e.data,t=e.options,n=e.handleChange,s=e.handleSubmit,c=e.handleMultiChange,l=e.errors;return r.a.createElement("section",{className:"is-dark is-fullheight-with-navbar"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("form",{className:"column is-half is-offset-one-quarter",onSubmit:s},r.a.createElement("h2",{className:"title is-1 has-text-warning has-text-centered is-family-code"},"Add a place to the Hive"),r.a.createElement("div",{className:"notification is-light"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(l.name?"is-danger":""),placeholder:"e.g. The Breakfast Club",name:"name",onChange:n,value:a.name,required:!0})),l.name&&r.a.createElement("small",{className:"help is-danger"},l.name)),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(l.address?"is-danger":""),placeholder:"Address",name:"address",onChange:n,value:a.address})),l.address&&r.a.createElement("small",{className:"help is-danger"},l.address)),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(l.postcode?"is-danger":""),placeholder:"Postcode",name:"postcode",onChange:n,value:a.postcode})),l.postcode&&r.a.createElement("small",{className:"help is-danger"},l.postcode)),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(l.image?"is-danger":""),placeholder:"Image",name:"image",onChange:n,value:a.image})),l.image&&r.a.createElement("small",{className:"help is-danger"},l.image)),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"textarea",placeholder:"Description",name:"description",onChange:n,value:a.description}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Select the facilities from the dropdown below"),r.a.createElement("div",{className:"control"},r.a.createElement(f.a,{options:t,isMulti:!0,onChange:c}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{type:"submit",className:"button is-info is-rounded is-outlined is-medium is-fullwidth is-family-code"},"Add a place"))))))))},Y=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(h.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={data:{name:"",address:"",postcode:"",image:"",description:"",choices:[""]},errors:{}},t.options=[{value:"desks",label:"Desks"},{value:"charging",label:"Charging Plugs"},{value:"cafe",label:"Cafe onsite"},{value:"sofas",label:"Comfy sofas"},{value:"wifi",label:"Wifi"}],t.handleMultiChange=function(e){var a=e?e.map((function(e){return e.value})):[];t.setState({choices:a})},t.handleChange=function(e){var a=Object(P.a)({},t.state.data,Object(o.a)({},e.target.name,e.target.value)),n=Object(P.a)({},t.state.errors,Object(o.a)({},e.target.name,""));t.setState({data:a,errors:n})},t.handleSubmit=function(){var e=Object(x.a)(j.a.mark((function e(a){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,S.a.post("/api/places/",t.state.data,{headers:{Authorization:"Bearer ".concat(g.getToken())}});case 4:n=e.sent,r=n.data,t.props.history.push("/places/".concat(r.id)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.setState({errors:e.t0.response.data.errors});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}(),t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("section",{className:"is-dark is-fullheight-with-navbar"},r.a.createElement("div",{className:"hero-body"},r.a.createElement(L,{data:this.state.data,handleChange:this.handleChange,handleSubmit:this.handleSubmit,options:this.options,handleMultiChange:this.handleMultiChange,errors:this.state.errors})))}}]),a}(r.a.Component),_=t(31),F=t(51),R=(t(84),function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(h.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={places:[],name:[],viewport:{longitude:-.118092,latitude:51.509865,zoom:12},popupInfo:null},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(x.a)(j.a.mark((function e(){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("/api/places");case 3:a=e.sent,this.setState({places:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;console.log("mapszz");var a=this.state.viewport;return r.a.createElement(_.c,Object.assign({},a,{mapboxApiAccessToken:"pk.eyJ1IjoiY2thcGFrIiwiYSI6ImNrNWk4eXNuZjA4bGMzZ21uY3g1aG81YzQifQ.wz-4MxPmrqfMG6Ie5iiIGw",onViewportChange:function(a){return e.setState({viewport:a})},height:"100vh",width:"100vw",mapStyle:"mapbox://styles/mapbox/streets-v11"}),this.state.places.map((function(a){return console.log(a),r.a.createElement(_.a,{key:a.id,latitude:parseFloat(a.latitude),longitude:parseFloat(a.longitude)},r.a.createElement(l.b,{to:"/place/".concat(a.id)},r.a.createElement(F.a,{className:"marker",src:a.name,onMouseOver:function(){return e.setState({popupInfo:a})},onMouseOut:function(){return e.setState({popupInfo:null})}})))})),this.state.popupInfo&&r.a.createElement(_.b,{tipSize:5,anchor:"bottom-right",closeButton:!1,longitude:Number(this.state.popupInfo.longitude),latitude:Number(this.state.popupInfo.latitude)},r.a.createElement("p",null,this.state.popupInfo.name)))}}]),a}(r.a.Component)),W=function(){return r.a.createElement(l.a,null,r.a.createElement("main",null,r.a.createElement(y,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",component:v}),r.a.createElement(i.b,{path:"/places/search",component:D}),r.a.createElement(k,{path:"/places/new",component:Y}),r.a.createElement(i.b,{path:"/places",component:M}),r.a.createElement(i.b,{path:"/place/:id",component:z}),r.a.createElement(i.b,{path:"/register",component:T}),r.a.createElement(i.b,{path:"/login",component:B}),r.a.createElement(i.b,{path:"/maps",component:R}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[52,1,2]]]);
//# sourceMappingURL=main.dd75d74d.chunk.js.map