(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{33:function(e,a,t){e.exports=t.p+"static/media/logo-via-logohub2.e641c11f.png"},54:function(e,a,t){e.exports=t(84)},59:function(e,a,t){},60:function(e,a,t){},84:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(22),c=t.n(s),l=(t(59),t(13)),i=t(21),o=(t(60),t(61),t(18)),m=t(7),u=t(8),p=t(10),d=t(11),h=t(28),f=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).state={postcode:"",choices:[""]},e.options=[{value:"desks",label:"Desks"},{value:"charging",label:"Charging Plugs"},{value:"cafe",label:"Cafe onsite"},{value:"sofas",label:"Comfy sofas"},{value:"wifi",label:"Wifi"}],e.handleMultiChange=function(a){var t=a?a.map((function(e){return e.value})):[];e.setState({choices:t})},e.handleChange=function(a){e.setState(Object(o.a)({},a.target.name,a.target.value))},e.handleSubmit=function(a){a.preventDefault();var t={postcode:e.state.postcode.replace(" ",""),choices:e.state.choices};e.props.history.push({pathname:"/places/search",search:"",state:{find_location:t}})},e}return Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"hero is-fullheight-with-navbar"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("p",{className:"title is-1 has-text-warning has-text-centered is-family-code"},"Find your place to Bee.LDN"),r.a.createElement("p",{className:"has-text-white has-text-centered"},"Searching for a FREE place to study in London? Use our search below!"),r.a.createElement("form",{className:"has-text-centered",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label has-text-white has-text-centered"},"Enter your postcode here:"),r.a.createElement("input",{type:"text",className:"column is-half is-offset-one-quarter card",placeholder:"Postcode",onChange:this.handleChange,name:"postcode",required:!0})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label has-text-white has-text-centered"},"Select the facilities you require from the dropdown below:"),r.a.createElement("div",{className:"control column is-half is-offset-one-quarter card"},r.a.createElement(h.a,{options:this.options,isMulti:!0,onChange:this.handleMultiChange}))),r.a.createElement("button",{className:"button is-warning is-rounded is-medium is-one-quarter is-family-code"},"Search")))))}}]),t}(r.a.Component),v=function(){function e(){Object(m.a)(this,e)}return Object(u.a)(e,null,[{key:"setToken",value:function(e){localStorage.setItem("token",e)}},{key:"getToken",value:function(){return localStorage.getItem("token")}},{key:"logout",value:function(){localStorage.removeItem("token")}},{key:"getPayload",value:function(){var e=this.getToken();if(!e)return!1;var a=e.split(".");return!(a.length<3)&&JSON.parse(atob(a[1]))}},{key:"isAuthenticated",value:function(){var e=this.getPayload();return!!e&&Math.round(Date.now()/1e3)<e.exp}}]),e}(),g=t(33),b=t.n(g),E=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).state={navOpen:!1},e.toggleNavbar=function(){e.setState({navOpen:!e.state.navOpen})},e.handleLogout=function(){v.logout(),e.props.history.push("/")},e}return Object(u.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.location.pathname!==e.location.pathname&&this.setState({navOpen:!1})}},{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar is-info"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement(l.b,{className:"navbar-item",to:"/"},r.a.createElement("img",{src:b.a,alt:b.a})),r.a.createElement("a",{href:"/#",className:"navbar-burger ".concat(this.state.navOpen?"is-active":""),onClick:this.toggleNavbar},r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}))),r.a.createElement("div",{className:"navbar-menu ".concat(this.state.navOpen?"is-active":"")},r.a.createElement("div",{className:"navbar-end"},r.a.createElement(l.b,{className:"navbar-item is-family-code",to:"/maps"},"HiveMap"),r.a.createElement(l.b,{className:"navbar-item is-family-code",to:"/places"},"HiveList"),!v.isAuthenticated()&&r.a.createElement(l.b,{className:"navbar-item is-family-code",to:"/register"},"Signup"),!v.isAuthenticated()&&r.a.createElement(l.b,{className:"navbar-item is-family-code",to:"/login"},"Login"),v.isAuthenticated()&&r.a.createElement(l.b,{className:"navbar-item is-family-code",to:"/places/new"},"Add to the Hive"),v.isAuthenticated()&&r.a.createElement("a",{href:"/#",onClick:this.handleLogout,className:"navbar-item is-family-code"},"Logout")))))}}]),t}(r.a.Component),N=Object(i.g)(E),y=t(53),w=function(e){var a=e.component,t=Object(y.a)(e,["component"]);return v.isAuthenticated()?r.a.createElement(i.b,Object.assign({},t,{component:a})):(v.logout(),r.a.createElement(i.a,{to:"/login"}))},k=t(5),O=t.n(k),x=t(12),j=t(9),C=t.n(j),S=function(e){var a=e.id,t=e.name,n=e.image;return r.a.createElement("div",{className:"column is-one-quarter-desktop is-one-third-tablet is-half-mobile"},r.a.createElement(l.b,{to:"/place/".concat(a)},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",{className:"card-header-title"},t)),r.a.createElement("div",{className:"card-image"},r.a.createElement("figure",{className:"image"},r.a.createElement("img",{src:n,alt:t}))))))},A="pk.eyJ1IjoiY2thcGFrIiwiYSI6ImNrNWk4eXNuZjA4bGMzZ21uY3g1aG81YzQifQ.wz-4MxPmrqfMG6Ie5iiIGw",I=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).state={places:[]},e.convertPostcode=function(){var e=Object(x.a)(O.a.mark((function e(a){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(a,".json?access_token=").concat(A));case 2:return t=e.sent,n=t.data.features.map((function(e){return{name:e.place_name,lng:e.center[0],lat:e.center[1]}})).sort((function(e){return e.name}))[0],e.abrupt("return",{latitude:n.lat,longitude:n.lng});case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(x.a)(O.a.mark((function e(){var a,t,n,r,s,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props.history.location,console.log("location: ",a),!a.state||!a.state.postcode){e.next=22;break}return t=a.state.postcode,console.log("Using postcode: "+t),e.next=7,this.convertPostcode(t);case 7:return n=e.sent,r=["longitude=".concat(n.longitude),"latitude=".concat(n.latitude)],e.prev=9,e.next=12,C.a.get("/api/places?".concat(r.join("&")));case 12:s=e.sent,this.setState({places:s.data}),console.log(s),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(9),this.props.history.push("/notfound");case 20:e.next=33;break;case 22:return e.prev=22,e.next=25,C.a.get("/api/places/");case 25:c=e.sent,this.setState({places:c.data}),console.log(c),e.next=33;break;case 30:e.prev=30,e.t1=e.catch(22),this.props.history.push("/notfound");case 33:case"end":return e.stop()}}),e,this,[[9,17],[22,30]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container is-centered"},r.a.createElement("div",{className:"columns is-mobile is-multiline"},this.props.history.location.state?r.a.createElement("p",{className:"container title is-3"},"Unfortunately we can't find anything like that in our database. But here are some alternatives nearby:"):null,this.state.places.map((function(e){return r.a.createElement(S,Object.assign({id:e.id,key:e.id},e))})))))}}]),t}(r.a.Component),M=t(52),D=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).state={places:[],viewport:{latitude:51.5074,longitude:.1278}},e.checkResults=function(a,t){a.length||e.props.history.push({pathname:"/places",search:"",state:{noResult:!0,postcode:t}})},e.convertData=Object(x.a)(O.a.mark((function a(){var t,n,r,s,c,l,i,o;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t=e.props.history.location.state.find_location,n=t.postcode,r=n.replace(/[^a-z0-9]/gi,"").slice(0,3).toLowerCase(),s=["postcode=".concat(r)],c=Object(M.a)(t.choices.filter((function(e){return e})));try{for(c.s();!(l=c.n()).done;)i=l.value,s.push("facilities="+i)}catch(m){c.e(m)}finally{c.f()}return a.next=8,C.a.get("/api/places?".concat(s.join("&")));case 8:o=a.sent,e.setState({places:o.data}),e.checkResults(o.data,n);case 11:case"end":return a.stop()}}),a)}))),e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){this.convertData()}},{key:"render",value:function(){return r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"columns is-mobile is-multiline"},this.state.places.map((function(e){return r.a.createElement(S,Object.assign({key:e.id},e))})))))}}]),t}(r.a.Component),P=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).state={place:{},text:""},e.handleChange=function(a){e.setState({text:a.target.value})},e.handleSubmit=function(a){a.preventDefault();var t=e.props.match.params.id;C.a.post("/api/places/".concat(t,"/comments/"),{text:e.state.text},{headers:{Authorization:"Bearer ".concat(v.getToken())}}).then((function(a){e.setState({place:a.data,text:""})})).catch((function(e){return console.log(e)}))},e.handleDelete=Object(x.a)(O.a.mark((function a(){var t;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.props.match.params.id,a.prev=1,a.next=4,C.a.delete("/api/places/".concat(t),{headers:{Authorization:"Bearer ".concat(v.getToken())}});case 4:e.props.history.push("/places"),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1),console.log(a.t0.response);case 10:case"end":return a.stop()}}),a,null,[[1,7]])}))),e.isOwner=function(){return console.log(e.state.place.user),v.getPayload().sub===e.state.place.user.id},e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(x.a)(O.a.mark((function e(){var a,t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.match.params.id,e.prev=1,e.next=4,C.a.get("/api/places/".concat(a));case 4:t=e.sent,this.setState({place:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.props.history.push("/notfound");case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){if(!this.state.place.id)return null;var e=this.state.place;return console.log(this.state.place),console.log(this.state.text,"text"),r.a.createElement("section",{className:"section show"},r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"title is-family-code"},e.name),r.a.createElement("h2",{className:"address"},"You'll find it here: ",e.address),r.a.createElement("hr",null),r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-half"},r.a.createElement("figure",{className:"image"},r.a.createElement("img",{src:e.image,alt:e.name})),r.a.createElement("hr",null),r.a.createElement("h4",{className:"title is-4 is-family-code"},"The amenities"),r.a.createElement("div",{className:"facility-text"},e.facilities.map((function(e){return r.a.createElement("div",{key:e.id},e.name)}))),r.a.createElement("hr",null)),r.a.createElement("div",{className:"column is-half"},r.a.createElement("h4",{className:"title is-4 is-family-code"},"What we love about ",e.name),r.a.createElement("p",null,e.description),r.a.createElement("hr",null),r.a.createElement("form",{className:"form title is-4 is-family-code",onSubmit:this.handleSubmit},"Tell us what you think! Send in your review:",r.a.createElement("hr",null),!v.isAuthenticated()&&r.a.createElement("div",{className:"message-header"},r.a.createElement("p",null,"Please login to add your review")),r.a.createElement("textarea",{name:"text",onChange:this.handleChange,value:this.state.text,placeholder:"Maximum character length for your comment is 50"}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Submit"})),r.a.createElement("article",{className:"media"},r.a.createElement("div",{className:"media-content"},r.a.createElement("h4",{className:"title is-4 is-family-code"},"Reviews from our members:"),r.a.createElement("hr",null),r.a.createElement("div",{className:"content"}," ",e.comments.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("p",null,r.a.createElement("strong",null,e.owner.username),r.a.createElement("br",null),'"',e.text,'"',r.a.createElement("br",null)),r.a.createElement("hr",null))})))))))))}}]),t}(r.a.Component),z=t(23),q=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).state={data:{username:"",email:"",password:"",password_confirmation:""},errors:{}},e.handleChange=function(a){var t=Object(z.a)({},e.state.data,Object(o.a)({},a.target.name,a.target.value)),n=Object(z.a)({},e.state.errors,Object(o.a)({},a.target.name,""));e.setState({data:t,errors:n})},e.handleSubmit=function(){var a=Object(x.a)(O.a.mark((function a(t){return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),a.prev=1,a.next=4,C.a.post("/api/register",e.state.data);case 4:e.props.history.push("/login"),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1),e.setState({errors:a.t0.response.data.errors});case 10:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(e){return a.apply(this,arguments)}}(),e}return Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"is-dark is-fullheight-with-navbar"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"column is-half is-offset-one-quarter"},r.a.createElement("h2",{className:"title is-1 has-text-warning has-text-centered is-family-code"},"Register"),r.a.createElement("div",{className:"notification is-light"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(this.state.errors.username," ? : 'is-danger' : '' "),name:"username",placeholder:"Username",onChange:this.handleChange})),this.state.errors.username&&r.a.createElement("small",{className:"help is-danger"},this.state.errors.username)),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(this.state.errors.email," ? : 'is-danger' : '' "),name:"email",placeholder:"Email",onChange:this.handleChange})),this.state.errors.email&&r.a.createElement("small",{className:"help is-danger"},this.state.errors.email)),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(this.state.errors.password," ? : 'is-danger' : '' "),name:"password",type:"password",placeholder:"Password",onChange:this.handleChange})),this.state.errors.password&&r.a.createElement("small",{className:"help is-danger"},this.state.errors.password)),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(this.state.errors.password_confirmation," ? : 'is-danger' : '' "),name:"password_confirmation",type:"password",placeholder:"Password Confirmation",onChange:this.handleChange})),this.state.errors.password_confirmation&&r.a.createElement("small",{className:"help is-danger"},this.state.errors.password_confirmation)),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{type:"submit",className:"button is-info is-rounded is-outlined is-medium is-fullwidth is-family-code"},"Signup"))))))))}}]),t}(r.a.Component),T=t(49),G={common:{"X-CSRF-TOKEN":t.n(T).a.get("csrftoken")}},_=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).state={data:{email:"",password:""},error:""},e.handleChange=function(a){var t=a.target,n=t.name,r=t.value,s=Object(z.a)({},e.state.data,Object(o.a)({},n,r));e.setState({data:s,error:""})},e.handleSubmit=function(){var a=Object(x.a)(O.a.mark((function a(t){var n;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),a.prev=1,a.next=4,C.a.post("/api/login",e.state.data,G);case 4:n=a.sent,a.next=11;break;case 7:return a.prev=7,a.t0=a.catch(1),e.setState({error:"Incorrect Credentials"}),a.abrupt("return");case 11:v.setToken(n.data.token),e.props.history.push("/places");case 13:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(e){return a.apply(this,arguments)}}(),e}return Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"is-dark is-fullheight-with-navbar"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"column is-half is-offset-one-quarter"},r.a.createElement("h2",{className:"title is-1 has-text-warning has-text-centered is-family-code"},"Login"),r.a.createElement("div",{className:"notification is-light"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(this.state.error," ? : 'is-danger' : '' "),name:"email",placeholder:"Email",onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input ".concat(this.state.error," ? : 'is-danger' : '' "),type:"password",name:"password",placeholder:"Password",onChange:this.handleChange})),this.state.error&&r.a.createElement("small",{className:"help is-danger"},this.state.error)),r.a.createElement("button",{type:"submit",className:"button is-info is-rounded is-outlined is-medium is-fullwidth is-family-code"},"Get me into the Hive"))))))}}]),t}(r.a.Component),B=function(e){e.data;var a=e.options,t=e.handleChange,n=e.handleSubmit,s=e.handleUpload,c=e.handleMultiChange;return r.a.createElement("section",{className:"is-dark is-fullheight-with-navbar"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("form",{className:"column is-half is-offset-one-quarter",onSubmit:n},r.a.createElement("h2",{className:"title is-1 has-text-warning has-text-centered is-family-code"},"Add a place to the Hive"),r.a.createElement("div",{className:"notification is-light"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",required:!0,placeholder:"Name of the place e.g. The Breakfast Club",name:"name",onChange:t}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"Address",name:"address",onChange:t}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",placeholder:"Postcode",name:"postcode",onChange:t}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"image",placeholder:"Image",type:"file",name:"image",onChange:s}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"textarea",placeholder:"Description",name:"description",onChange:t}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Select the facilities from the dropdown below"),r.a.createElement("div",{className:"control"},r.a.createElement(h.a,{options:a,isMulti:!0,onChange:c}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{type:"submit",className:"button is-info is-rounded is-outlined is-medium is-fullwidth is-family-code"},"Add a place"))))))))},L=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).state={data:{name:"",address:"",postcode:"",image:null,description:"",choices:[""]}},e.options=[{value:"desks",label:"Desks"},{value:"charging",label:"Charging Plugs"},{value:"cafe",label:"Cafe onsite"},{value:"sofas",label:"Comfy sofas"},{value:"wifi",label:"Wifi"}],e.handleMultiChange=function(a){var t=a?a.map((function(e){return e.value})):[];e.setState({choices:t})},e.handleChange=function(a){var t=a.target,n=t.name,r=t.value,s=Object(z.a)({},e.state.data,Object(o.a)({},n,r));e.setState({data:s})},e.handleUpload=function(){var a=Object(x.a)(O.a.mark((function a(t){var n,r,s;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.target.files,(r=new FormData).append("file",n[0]),r.append("upload_preset","an5meedt"),a.next=6,C.a.post("https://api.cloudinary.com/v1_1/ckapak/image/upload",r);case 6:s=a.sent,console.log(s),e.setState({image:s.data.url},(function(){e.handleChange({target:{name:"image",value:s.data.url}})}));case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleSubmit=function(){var a=Object(x.a)(O.a.mark((function a(t){var n;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),a.prev=1,a.next=4,C.a.post("/api/places/",e.state.data,{headers:{Authorization:"Bearer ".concat(v.getToken())}});case 4:n=a.sent,e.props.history.push("/places/".concat(n.data.id)),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),e.props.history.push("/notfound");case 11:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}(),e}return Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"is-dark is-fullheight-with-navbar"},r.a.createElement("div",{className:"hero-body"},r.a.createElement(B,{data:this.state.data,handleChange:this.handleChange,handleSubmit:this.handleSubmit,handleUpload:this.handleUpload,options:this.options,handleMultiChange:this.handleMultiChange,errors:this.state.errors})))}}]),t}(r.a.Component),U=t(30),Y=t(51),F=(t(83),function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).state={places:[],name:[],viewport:{longitude:-.118092,latitude:51.509865,zoom:12},popupInfo:null},e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(x.a)(O.a.mark((function e(){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("/api/places");case 3:a=e.sent,this.setState({places:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;console.log("mapszz");var a=this.state.viewport;return r.a.createElement(U.c,Object.assign({},a,{mapboxApiAccessToken:"pk.eyJ1IjoiY2thcGFrIiwiYSI6ImNrNWk4eXNuZjA4bGMzZ21uY3g1aG81YzQifQ.wz-4MxPmrqfMG6Ie5iiIGw",onViewportChange:function(a){return e.setState({viewport:a})},height:"100vh",width:"100vw",mapStyle:"mapbox://styles/mapbox/streets-v11"}),this.state.places.map((function(a){return console.log(a),r.a.createElement(U.a,{key:a.id,latitude:parseFloat(a.latitude),longitude:parseFloat(a.longitude)},r.a.createElement(l.b,{to:"/place/".concat(a.id)},r.a.createElement(Y.a,{className:"marker",src:a.name,onMouseOver:function(){return e.setState({popupInfo:a})},onMouseOut:function(){return e.setState({popupInfo:null})}})))})),this.state.popupInfo&&r.a.createElement(U.b,{tipSize:5,anchor:"bottom-right",closeButton:!1,longitude:Number(this.state.popupInfo.longitude),latitude:Number(this.state.popupInfo.latitude)},r.a.createElement("p",null,this.state.popupInfo.name)))}}]),t}(r.a.Component)),R=function(){return r.a.createElement(l.a,null,r.a.createElement("main",null,r.a.createElement(N,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",component:f}),r.a.createElement(i.b,{path:"/places/search",component:D}),r.a.createElement(w,{path:"/places/new",component:L}),r.a.createElement(i.b,{path:"/places",component:I}),r.a.createElement(i.b,{path:"/place/:id",component:P}),r.a.createElement(i.b,{path:"/register",component:q}),r.a.createElement(i.b,{path:"/login",component:_}),r.a.createElement(i.b,{path:"/maps",component:F}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[54,1,2]]]);
//# sourceMappingURL=main.eb1dc4d2.chunk.js.map